{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125587625-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-125587625-1');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <title>MOVIESITENAME</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{% static "css/main.css" %}">
    <script
            src="https://code.jquery.com/jquery-1.12.4.min.js"
            integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
            crossorigin="anonymous">
    </script>
</head>
<body>
<div class="container">
    {% block header %}
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header margin-top-17">
                    <a href="{% url 'movie-list' %}">
                        <img src="{% static 'images/logo.png' %}" width="150"/>
                    </a>
                </div>
                <center>
                    <div class="margin-top-17">

                        <form method="GET" action="{% url 'movie-list' %}" class="form-inline">
                            <div class="form-group">
                                <input type="text" value="{{ request.GET.search }}" name='search'
                                       placeholder="Search in titles, description" class="form-control">

                            </div>
                            <div class="form-group">
                                <select name="search_by" class="form-control">
                                    {# TODO: refactor if, make a template or filter or cookies in views? #}
                                    <option value="title" {% if request.GET.search_by == 'title' %}selected {% endif %}>Cím szerint</option>
                                    <option value="actors" {% if request.GET.search_by == 'actors' %}selected {% endif %}>Színész szerint</option>
                                    <option value="directors" {% if request.GET.search_by == 'directors' %}selected {% endif %}>Rendező szerint</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="category">Kategória</label>
                                <select name="category" class="form-control" id="category">
                                    <option value='all' selected>Összes</option>
                                    {% for option in category_options %}
                                        <option value={{ option }} {% if request.GET.category == option %}selected {% endif %}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="type">Típus</label>
                                <select name="type" class="form-control" id="type">
                                    <option value='all' {% if request.GET.type == 'all' %}selected {% endif %}>Összes</option>
                                    <option value='movie' {% if request.GET.type == 'movie' %}selected {% endif %}>Csak filmek</option>
                                    <option value='series' {% if request.GET.type == 'series' %}selected {% endif %}>Csak sorozatok</option>
                                </select>
                            </div>
                            <button type="submit" value="Search" class="btn btn-default">
                                <span class="glyphicon glyphicon-search"></span>&nbsp;Keresés
                            </button>
                        </form>
                    </div>
                </center>
            </div>

            <div class="container-fluid">
                <center>
                    <div class="margin-bottom-17">

                        <form method="GET" action="{% url 'random-movie' %}" class="form-inline">
                            <div class="form-group">
                                <label for="category">Kategória</label>
                                <select name="category" class="form-control" id="category">
                                    <option value='all' selected>Összes</option>
                                    {% for option in category_options %}
                                        <option value={{ option }} {% if request.GET.category == option %}selected {% endif %}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="type">Típus</label>
                                <select name="type" class="form-control" id="type">
                                    <option value='all' {% if request.GET.type == 'all' %}selected {% endif %}>Összes</option>
                                    <option value='movie' {% if request.GET.type == 'movie' %}selected {% endif %}>Csak filmek</option>
                                    <option value='series' {% if request.GET.type == 'series' %}selected {% endif %}>Csak sorozatok</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="imdb_score">Nagyobb mint</label>
                                <select name="imdb_score" class="form-control" id="imdb_score">
                                    {# range in django template #}
                                    {% for i in "x"|ljust:"10" %}
                                        {% if request.GET.imdb_score %}
                                            <option value="{{ forloop.counter0 }}"
                                                    {% if request.GET.imdb_score == forloop.counter0|stringformat:"i" %}selected {% endif %}>
                                                {{ forloop.counter0 }}
                                            </option>
                                        {% else %}
                                            {% if forloop.counter0 == 5 %}
                                                <option value="5" selected>5</option>
                                            {% else %}
                                                <option value="{{ forloop.counter0 }}">
                                                    {{ forloop.counter0 }}
                                                </option>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </select>
                                <label for="imdb_score">pont</label>
                            </div>
                            <button type="submit" value="Search" class="btn btn-default">
                                <span class="glyphicon glyphicon-random"></span>&nbsp;Random movie
                            </button>
                        </form>
                    </div>
                </center>
            </div>

        </nav>
    {% endblock %}
    {% block content %}
    {% endblock %}
    {% block footer %}
        <footer style="margin-top 50px;">
            <hr>
            <center><p>© 2018 All rights reserved by MOVIESITENAME.</p></center>
        </footer>
    {% endblock footer %}
</div>
</body>
</html>